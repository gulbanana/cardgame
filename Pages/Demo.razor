@page "/demo"
@inject NavigationManager Navigation
@inject IGameEndpoint Endpoint
@inject IUserSession Session
@code {
    private IGame game;
    private GameModel currentModel;

    protected override void OnInitialized()
    {
        Session.Login("demo");
        game = Endpoint.FindGame("demo");
        currentModel = game.Subscribe(OnUpdate);
    }

    private void OnUpdate(GameModel newModel)
    {
        InvokeAsync(() =>
        {
            currentModel = newModel;
            StateHasChanged();
        });
    }

    private void DoExecute(ClientCommand command)
    {
        var error = game.Execute(Session.Username, command);

        if (error != null)
        {
            Console.WriteLine(error);
        }
    }
}

<CascadingValue Value="@(new Executor(DoExecute))">
    <GameView Model="currentModel" />
</CascadingValue>