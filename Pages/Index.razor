@page "/"
@inject UserSession Session
@inject NavigationManager Navigation
@code {
    string username;
    string error;

    protected override void OnInitialized()
    {
        if (Session.IsLoggedIn)
        {
            Session.Logout();
        }
    }

    void OnSubmit()
    {
        if (!string.IsNullOrWhiteSpace(username))
        {
            if (Session.Login(username))
            {
                Navigation.NavigateTo("/play");
            }
            else
            {
                error = "Another player with this username is already logged in.";
            }
        }
    }
}

<p>
    Please enter a username.<br>
    <form @onsubmit="OnSubmit">
        <input type="text" @bind="username">
        <input type="submit" value="Join game!">
    </form>
    @if (error != null)
    {
        <br><span class="index__error">@error</span>
    }
</p>